## Windows 常用命令

#### 清除 powershell 历史记录

```powershell
Remove-Item (Get-PSReadlineOption).HistorySavePath
```

#### ffmpeg 剪切视频

-ss 指定从什么时间开始 -t 指定需要截取多长时间 -i 指定输入文件

```shell
ffmpeg -ss 00:00:00 -t 00:00:30 -i test.mp4 -vcodec copy -acodec copy output.mp4
```

#### ffmpeg 合并视频

视频合并，在list.txt文件中，用以下内容指示要合并的文件

```txt
file 1.mp4
file 2.mp4
```

使用 ffmpeg 命令合并视频。以下是一个示例命令：

```shell
ffmpeg -f concat -i list.txt -c copy concat.mp4
```

#### flv 批量转 mp4

```shell
for i in *.flv; do ffmpeg -i "$i" -vcodec copy -acodec copy "${i%.*}.mp4"; done
```

#### ffmpeg 合并视频与音频文件

要合并音频和视频文件，需要使用 ffmpeg 的 -i 参数指定输入文件，然后使用 -c copy 参数指示 ffmpeg 输出原始的音频和视频流，最后使用 -map 参数指定要合并的流。例如，假设有一个名为 video.mp4 的视频文件和一个名为 audio.mp3 的音频文件，要将它们合并到一起，可以使用以下命令：

```shell
ffmpeg -i video.mp4 -i audio.mp3 -c copy -map 0:v:0 -map 1:a:0 output.mp4
```

其中，-i video.mp4 和 -i audio.mp3 分别指定输入文件，-c copy 指示 ffmpeg 输出原始的音频和视频流，-map 0:v:0 指定使用第一个输入文件（即视频文件）的第一个视频流，-map 1:a:0 指定使用第二个输入文件（即音频文件）的第一个音频流。最后，output.mp4 指定输出文件的名称。

#### ffmpeg 添加章节标记

使用文本编辑器创建一个标记文件（例如，chapters.ini），该文件应包含章节的名称和时间戳。格式如下：

```ini
;FFMETADATA1
title=bikeshed
artist=FFmpeg troll team

[CHAPTER]
TIMEBASE=1/1000
START=0
#chapter ends at 0:01:00
END=60000
title=chapter \#1

[CHAPTER]
TIMEBASE=1/1000
START=60000
#chapter ends at 0:02:00
END=120000
title=chapter \#2

[STREAM]
title=multiline
```

使用 ffmpeg 命令添加章节标记。以下是一个示例命令：

```shell
ffmpeg -i input.mp4 -i chapters.ini -map_metadata 1 -c copy output.mp4
```

该命令将输入视频（input.mp4）和章节标记文件（chapters.txt）合并到输出视频（output.mp4）中。 -map 0 选项将所有输入流（视频，音频等）从输入文件映射到输出文件，-map_metadata 1 选项将章节标记文件中的元数据映射到输出文件中。 -codec copy 选项告诉 ffmpeg 使用与输入文件相同的编解码器，以避免重新编码。

#### 设置开机启动软件

```batch
@echo off
::start autohotkey
echo starting autohotkey …
start "" "autohotkeypath"
::sleep 2 sec
timeout /t 2
echo autohotkey started!

pause
```

为 powershell 启用 Emacs 风格快捷键
```powershell
# powershell中应该已经自带了 PSReadLine 模块,直接使用

Set-PSReadLineOption -EditMode Emacs
```